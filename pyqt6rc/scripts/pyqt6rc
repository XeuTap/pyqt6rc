#!/usr/bin/env python3

import argparse
import os.path
import sys

from pyqt6rc.tools import parse_qrc, ui_to_py, modify_py, save_py

description = "yup"

arguments = sys.argv
parser = argparse.ArgumentParser(
    formatter_class=argparse.RawTextHelpFormatter,
    description="\r\n".join(description)
)
parser.add_argument("input", type=str, help="Path to .ui template file generated by pyuic6", default="*")
parser.add_argument("-q", "--qrc", type=str, help="Path to .qrc file", default="./resources.qrc")
parser.add_argument("-p", "--package", type=str, help="Name of the resource package")
parser.add_argument("-tb", "--tab_size", type=int, help="Size of tab in spaces, default=4", default=4)
parser.add_argument("-v", "--version", help="pyqt6rc version", action='store_true')
args = parser.parse_args()

if not os.path.exists(args.input):
    raise Exception(f"Template file {args.input} does not exists.")

if not os.path.exists(args.qrc):
    raise Exception(f"Resource file {args.input} does not exists.")

qrc = parse_qrc(args.qrc)
py_input = ui_to_py(args.input)
py_modified = modify_py(args.package, py_input, qrc, args.tab_size)
save_py(args.input, py_modified)
